---
import { LINKS } from "../constants"
import { UserButton } from "astro-clerk-auth/components/interactive"
import { SignedIn, SignedOut } from "astro-clerk-auth/components/control"

const links = [
	{ path: LINKS.pagePaths.tips, label: "Tips" },
	{ path: LINKS.pagePaths.course, label: "Course" },
	{ path: LINKS.pagePaths.errors, label: "Errors" },
]

const pathname = new URL(Astro.request.url).pathname

const showSigninState = pathname.startsWith(LINKS.pagePaths.course)
---

<header>
	<div class="container padding">
		<nav>
			<a href="/" class="brand">simple:<span>typescript</span></a>
			<div class="other-links">
				{
					links.map(link => (
						<a
							class={pathname.startsWith(link.path) ? "active" : ""}
							href={link.path}
						>
							{link.label}
						</a>
					))
				}

				{
					showSigninState && (
						<>
							<UserButton />
							<SignedOut>
								<a class="signin" href="/signin">
									Sign in
								</a>
							</SignedOut>
						</>
					)
				}
			</div>
		</nav>
	</div>
</header>

<style lang="scss">
	header {
		background-color: color-mix(in srgb, var(--main-color), white 10%);
		border-bottom: 4px solid var(--white-100);

		.padding {
			padding-top: 0;
			padding-bottom: 0;
		}

		nav {
			display: flex;
			gap: 30px;
			padding: 20px 0;
			align-items: center;
		}

		.brand {
			background-color: var(--white-100);
			border: 2px solid var(--white-200);
			padding: 10px 20px;
			color: var(--text-color);
			transition: background-color 300ms;
			// font-size: 1.3em;
			border-radius: 3px;

			span {
				color: var(--yellow);
				margin-left: 5px;
			}

			&:hover {
				background-color: var(--white-200);
			}
		}

		nav .other-links {
			display: flex;
			align-items: center;
			gap: 20px;

			a {
				color: var(--text-color);
				transition:
					color 300ms,
					background-color 300ms;

				&:hover,
				&.active {
					color: var(--yellow);
				}
			}

			.signin {
				border: 1px solid var(--blue);
				color: var(--blue);
				padding: 5px 10px;
				border-radius: 2px;
				margin-left: 20px;

				&:hover {
					background-color: var(--blue);
					color: white;
				}
			}
		}
	}
</style>
